<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>TITLE</title>
    <link rel="stylesheet" href="https://modus.trimble.com/css/modus.min-0.9.5.css">
    <script>
      var loaded = false;

      // Disable context menu.
      window.oncontextmenu = function (e) { e.preventDefault() };
      window.onerror = function(message, source, lineno, colno, error) {
        alert("source:" + lineno + ":" + colno + "\n\n" + message);
      }

      var scaleField;
      var dpiField;

      function updateFields(scale, dpi) {
        if (!loaded) return;

        scaleField.value = scale;
        dpiField.value = dpi;

        markAsValid(scaleField);
        markAsValid(dpiField);

        document.getElementsByTagName('form')[0].style.display = '';
        document.getElementById('message').style.display = 'none';
      }

      function displayMessage(message) {
        document.getElementsByTagName('form')[0].style.display = 'none';
        document.getElementById('message').style.display = '';
        document.getElementById('message').innerHTML = message;
      }

      function markAsInvalid(field) {
        field.classList.add("is-invalid");
      }

      function markAsValid(field) {
        field.classList.remove("is-invalid");
      }

      window.onload = function() {
        scaleField = document.getElementById('scale');
        dpiField = document.getElementById('dpi');

        scaleField.onchange = scaleField.onkeyup = onWrite;
        dpiField.onchange = dpiField.onkeyup = onWrite;

        loaded = true;

        sketchup.ready();
      };

      function onWrite(event) {
        sketchup.onChange(scaleField.value, dpiField.value);
      }
    </script>
  </head>
  <body class="m-3">
    <form id="dlg-content-area">
      <div class="form-group">
        <label for="scale">Scale</label>
        <input class="form-control" id="scale" placeholder="1:100">
      </div>
      <div class="form-group">
        <label for="dpi">DPI</label>
        <input class="form-control" id="dpi" placeholder="300">
      </div>
    </form>
    <p id="message" style="display: none;"></p>
  </body>
</html>